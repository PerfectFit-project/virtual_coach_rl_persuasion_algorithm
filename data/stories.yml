version: "2.0"

stories:

- story: start_session_1
  steps:
  - intent: start_session1
  - action: utter_greet_first_time
  - action: utter_ask_for_mood
  - intent: mood_curr
  - action: action_answer_mood
  - action: utter_purpose
  - action: utter_expertise
  - intent: confirm
  - action: utter_prompt_usage
  - action: utter_explain_usage
  - intent: confirm
  - action: utter_prompt_session_overview
  - action: utter_explain_session_overview_1
  - action: utter_explain_session_overview_2
  - action: utter_explain_session_overview_3
  - action: utter_explain_session_overview_4
  - action: utter_explain_session_final
  - intent: confirm
  - action: utter_great
  - action: utter_prepare_activity_proposal_session1
  - checkpoint: main_not_last
  
- story: start_session_2
  steps: 
  - intent: start_session2
  - action: utter_greet_not_first
  - action: utter_ask_for_mood
  - intent: mood_curr
  - action: action_answer_mood
  - action: utter_explain_session_234_1
  - action: utter_explain_session_2_2
  - action: utter_explain_session_2_3
  - action: utter_explain_session_2_4
  - intent: confirm
  - action: utter_explain_session_234_5
  - action: utter_explain_session_final
  - intent: confirm
  - checkpoint: activity_completion
  
- story: start_session_3
  steps: 
  - intent: start_session3
  - action: utter_greet_not_first
  - action: utter_ask_for_mood
  - intent: mood_curr
  - action: action_answer_mood
  - action: utter_explain_session_234_1
  - action: utter_explain_session_34_2
  - action: utter_explain_session_345_3
  - action: utter_explain_session_345_4
  - intent: confirm
  - action: utter_explain_session_234_5
  - action: utter_explain_session_final
  - intent: confirm
  - checkpoint: activity_completion
  
- story: start_session_4
  steps: 
  - intent: start_session4
  - action: utter_greet_not_first
  - action: utter_ask_for_mood
  - intent: mood_curr
  - action: action_answer_mood
  - action: utter_explain_session_234_1
  - action: utter_explain_session_34_2
  - action: utter_explain_session_345_3
  - action: utter_explain_session_345_4
  - intent: confirm
  - action: utter_explain_session_234_5
  - action: utter_explain_session_final
  - intent: confirm
  - checkpoint: activity_completion
  
- story: start_session_5
  steps: 
  - intent: start_session5
  - action: utter_greet_last
  - action: utter_ask_for_mood
  - intent: mood_curr
  - action: action_answer_mood
  - action: utter_explain_session_5_1
  - action: utter_explain_session_5_2
  - action: utter_explain_session_345_3
  - action: utter_explain_session_345_4
  - intent: confirm
  - action: utter_explain_session_5_5
  - action: utter_explain_session_5_6
  - action: utter_explain_session_final
  - intent: confirm
  - checkpoint: activity_completion_last
  
- story: activity_completion_done_last
  steps:
  - checkpoint: activity_completion_last
  - action: utter_ask_activity_completion_last
  - intent: reward_answer
  - action: action_set_slot_reward
  - slot_was_set:
    - action_success: True
  - action: utter_response_activity_completion_done_last
  - action: utter_ask_activity_completion_details
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext_activity_comp
  - action: utter_prepare_activity_proposal_session5
  - checkpoint: main_last
  
- story: activity_completion_notDone_last
  steps:
  - checkpoint: activity_completion_last
  - action: utter_ask_activity_completion_last
  - intent: reward_answer
  - action: action_set_slot_reward
  - slot_was_set:
    - action_success: False
  - action: utter_response_activity_completion_notDone_last
  - action: utter_ask_activity_completion_details
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext_activity_comp
  - action: utter_prepare_activity_proposal_session5
  - checkpoint: main_last
  
- story: activity_completion_done_notLast
  steps:
  - checkpoint: activity_completion
  - action: utter_ask_activity_completion
  - intent: reward_answer
  - action: action_set_slot_reward
  - slot_was_set:
    - action_success: True
  - action: utter_response_activity_completion_done
  - action: utter_ask_activity_completion_details
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext_activity_comp
  - action: utter_prepare_activity_proposal_session234
  - checkpoint: main_not_last
  
- story: activity_completion_notDone_notLast
  steps:
  - checkpoint: activity_completion
  - action: utter_ask_activity_completion
  - intent: reward_answer
  - action: action_set_slot_reward
  - slot_was_set:
    - action_success: False
  - action: utter_response_activity_completion_notDone
  - action: utter_ask_activity_completion_details
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext_activity_comp
  - action: utter_prepare_activity_proposal_session234
  - checkpoint: main_not_last
  

- story: Main_not_last
  steps:
  - checkpoint: main_not_last
  - action: action_choose_activity
  - action: utter_activity_formulation
  - action: utter_activity_clear
  - intent: confirm
  - action: utter_questions_state_intro
  - intent: confirm
  - action: utter_question_state_1
  - intent: state_answer
  - action: utter_question_state_2
  - intent: state_answer
  - action: utter_question_state_3
  - intent: state_answer
  - action: utter_question_state_4
  - intent: state_answer
  - action: utter_question_attention_check
  - intent: state_answer
  - action: utter_question_state_5
  - intent: state_answer
  - action: utter_question_state_6_prep
  - intent: confirm
  - action: utter_question_state_6
  - intent: state_answer
  - action: utter_question_state_7
  - intent: state_answer
  - action: utter_question_state_8
  - intent: state_answer
  - action: utter_question_attention_check_2
  - intent: state_answer
  - action: utter_question_state_9
  - intent: state_answer
  - action: utter_question_state_10
  - intent: state_answer
  - action: utter_thank_statement_answering
  - action: utter_message_formulation_prep
  - checkpoint: choose_persuasion
  
- story: Main_last
  steps:
  - checkpoint: main_last
  - action: action_choose_activity
  - action: utter_activity_formulation
  - action: utter_activity_clear_last
  - intent: confirm
  - action: utter_questions_state_intro
  - intent: confirm
  - action: utter_question_state_1_last
  - intent: state_answer
  - action: utter_question_state_2_last
  - intent: state_answer
  - action: utter_question_state_3_last
  - intent: state_answer
  - action: utter_question_state_4_last
  - intent: state_answer
  - action: utter_question_attention_check_last
  - intent: state_answer
  - action: utter_question_state_5_last
  - intent: state_answer
  - action: utter_question_state_6_prep
  - intent: confirm
  - action: utter_question_state_6_last
  - intent: state_answer
  - action: utter_question_state_7_last
  - intent: state_answer
  - action: utter_question_state_8_last
  - intent: state_answer
  - action: utter_question_attention_check_2_last
  - intent: state_answer
  - action: utter_question_state_9_last
  - intent: state_answer
  - action: utter_question_state_10_last
  - intent: state_answer
  - action: utter_thank_statement_answering
  - checkpoint: end_last
  
- story: persuasion_no_input
  steps:
  - checkpoint: choose_persuasion
  - action: action_choose_persuasion_random
  - slot_was_set:
    - pers_input: False
  - action: utter_message_formulation
  - action: utter_ok
  - intent: confirm
  - checkpoint: end_not_last

- story: persuasion_input
  steps:
  - checkpoint: choose_persuasion
  - action: action_choose_persuasion_random
  - slot_was_set:
    - pers_input: True
  - action: utter_message_formulation
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext
  - checkpoint: persuasion_input_correctness
  
- story: persuasion_input_correct
  steps:
  - checkpoint: persuasion_input_correctness
  - slot_was_set:
    - plan_correct: True
  - checkpoint: end_not_last

- story: persuasion_input_false
  steps:
  - checkpoint: persuasion_input_correctness
  - slot_was_set:
    - plan_correct: False
  - action: utter_implementation_intention_syntax_error
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext
  - slot_was_set:
    - plan_correct: True
  - checkpoint: end_not_last
  
- story: persuasion_input_false_false
  steps:
  - checkpoint: persuasion_input_correctness
  - slot_was_set:
    - plan_correct: False
  - action: utter_implementation_intention_syntax_error
  - or:
    - intent: anything
    - intent: nlu_fallback
    - intent: mood_curr
    - intent: confirm
  - action: action_freetext
  - slot_was_set:
    - plan_correct: False
  - action: utter_implementation_intention_syntax_error_rep
  - checkpoint: end_not_last
  
- story: end_not_last
  steps:
  - checkpoint: end_not_last
  - action: utter_email_reminder
  - action: utter_remind_next_session
  - intent: confirm
  - action: action_save_session
  
- story: end_last
  steps:
  - checkpoint: end_last
  - action: utter_email_reminder
  - action: utter_remind_post_questionnaire
  - intent: confirm
  - action: utter_thank_participation
  - action: action_save_session
  